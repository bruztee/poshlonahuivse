/* HouseHold ImplementationValidator LegacyLayer PLEMetrics SignalsAbs SignalsAutoInsertion SignalsBsc SignalsCbs SignalsIds SignalsTvp SignalsVlp */
(()=>{var rr=Object.create;var It=Object.defineProperty,ir=Object.defineProperties,_e=Object.getOwnPropertyDescriptor,or=Object.getOwnPropertyDescriptors,nr=Object.getOwnPropertyNames,Ae=Object.getOwnPropertySymbols,sr=Object.getPrototypeOf,ve=Object.prototype.hasOwnProperty,ar=Object.prototype.propertyIsEnumerable;var $t=(i,t,e)=>t in i?It(i,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):i[t]=e,bt=(i,t)=>{for(var e in t||(t={}))ve.call(t,e)&&$t(i,e,t[e]);if(Ae)for(var e of Ae(t))ar.call(t,e)&&$t(i,e,t[e]);return i},Ct=(i,t)=>ir(i,or(t)),o=(i,t)=>It(i,"name",{value:t,configurable:!0});var Ee=(i,t)=>()=>(i&&(t=i(i=0)),t);var lr=(i,t)=>()=>(t||i((t={exports:{}}).exports,t),t.exports);var ur=(i,t,e,r)=>{if(t&&typeof t=="object"||typeof t=="function")for(let n of nr(t))!ve.call(i,n)&&n!==e&&It(i,n,{get:()=>t[n],enumerable:!(r=_e(t,n))||r.enumerable});return i};var dr=(i,t,e)=>(e=i!=null?rr(sr(i)):{},ur(t||!i||!i.__esModule?It(e,"default",{value:i,enumerable:!0}):e,i));var l=(i,t,e,r)=>{for(var n=r>1?void 0:r?_e(t,e):t,d=i.length-1,c;d>=0;d--)(c=i[d])&&(n=(r?c(t,e,n):c(n))||n);return r&&n&&It(t,e,n),n};var u=(i,t,e)=>$t(i,typeof t!="symbol"?t+"":t,e);var R=(i,t,e)=>new Promise((r,n)=>{var d=S=>{try{p(e.next(S))}catch(T){n(T)}},c=S=>{try{p(e.throw(S))}catch(T){n(T)}},p=S=>S.done?r(S.value):Promise.resolve(S.value).then(d,c);p((e=e.apply(i,t)).next())});var g,s=Ee(()=>{g={"4442842":{adServerId:65,customTracking:{c1:{type:"targeting",key:"amp_check"}},adPositionKey:"dvp_spos"}}});var a=Ee(()=>{});var Xe=lr((Jc,$e)=>{s();a();function Pr(i,t){if(typeof i!="function")throw new TypeError(`Expected the first argument to be a \`function\`, got \`${typeof i}\`.`);let e,r=0;return o(function(...d){clearTimeout(e);let c=Date.now(),p=c-r,S=t-p;S<=0?(r=c,i.apply(this,d)):e=setTimeout(()=>{r=Date.now(),i.apply(this,d)},S)},"throttled")}o(Pr,"throttle");$e.exports=Pr});s();a();s();a();s();a();s();a();s();a();var Xt={queueAdRequest:o(i=>{var t;try{(t=i.callback)==null||t.call(i),i.callback=null}catch(e){}},"queueAdRequest"),defineSlot:o((i,t)=>{},"defineSlot"),adRendered:o((i,t)=>{},"adRendered"),adRemoved:o(i=>{},"adRemoved"),getTargeting:o(i=>({}),"getTargeting"),addEventListener:o((i,t)=>{},"addEventListener"),removeEventListener:o((i,t)=>{},"removeEventListener"),toggleDebugMode:o(()=>{console.log("%c[UT-DEBUG]%c Debug mode is not available for this tag.","color: red","color: intial")},"toggleDebugMode"),_debugScriptLoaded:o(()=>{},"_debugScriptLoaded")};s();a();var Jt=class Jt{constructor(){u(this,"isEntryModule",!0)}};o(Jt,"EntryModule");var x=Jt;s();a();var Lt=class Lt{constructor(t){u(this,"_error");u(this,"_message","unknown");u(this,"_trace",[]);if(t instanceof Lt)return t;t instanceof Error&&(this._error=t,this._message=t.message)}get error(){return this._error}get message(){return this._message}get trace(){return this._trace}addToTrace(t){this.trace.unshift(t)}};o(Lt,"TracedError");var ft=Lt;var Zt=class Zt{constructor(t,e){u(this,"window");u(this,"dvtag");u(this,"modules",new Map);u(this,"errorHandlers",[]);u(this,"errors",[]);var r;this.window=e,this.window.dvtag=(r=this.window.dvtag)!=null?r:{},this.dvtag=this.window.dvtag,this.dvtag._core=this;for(let[n,d]of Object.entries(Xt))this.dvtag[n]=d;for(let n of t)this.createModule(n);for(let n of this.modules.values())this.applyModuleDecoration(n);for(let n of this.modules.values())this.applyErrorDecoration(n);for(let n of this.modules.values())this.applyPluginDecoration(n);for(let n of this.modules.values())this.applyApiDecoration(n);for(let n of this.modules.values())this.applyExecuteDecoration(n)}get moduleList(){return[...this.modules.keys()].map(t=>t.name)}get entryModuleList(){return[...this.modules.entries()].filter(([t,e])=>e instanceof x).map(([t,e])=>t.name)}get(t){return this.getModule(t).gateway}getByName(t){let e=[...this.modules.keys()].find(r=>r.name===t);return e!=null?this.get(e):null}getModule(t){let e=this.modules.get(t);if(e==null)throw new Error(`module not in core: ${t.name}`);return e}createModule(t){if(t.prototype.moduleConfig==null)throw new Error(`not a module: ${t.name}`);let e=new t;e.core=this,e.gateway={module:e},this.modules.set(t,e)}applyModuleDecoration(t){var n,d,c,p,S,T;let e=t.constructor.prototype.moduleConfig,r=t.constructor.name;for(let{method:E}of e){let rt=t[E].bind(t),j=(c=(d=(n=this.dvtag._hooks)==null?void 0:n.interceptModule)==null?void 0:d[r])==null?void 0:c[E],C=j==null?rt:j.bind(t),at=(T=(S=(p=this.dvtag._hooks)==null?void 0:p.inspectModule)==null?void 0:S[r])==null?void 0:T[E],Wt=at==null?C:(...Et)=>{let ht=C(...Et);return at(Et,ht),ht},er=o((...Et)=>{let ht;try{ht=Wt(...Et)}catch(Dt){throw this.traceMethodError(t,E,Et,Dt)}return ht instanceof Promise?ht.then(Dt=>Dt,Dt=>{throw this.traceMethodError(t,E,Et,Dt)}):ht},"traced");t.gateway[E]=er}if(t.plugins!=null){t.pluginFunctions={};for(let E of Object.keys(t.plugins)){t.pluginFunctions[E]=[];let rt=t.pluginFunctions[E];t.plugins[E]=(...j)=>{let C=[];for(let at of rt)try{C.push(at(...j))}catch(Wt){this.tracePluginError(t,E,Wt)}return C}}}}traceMethodError(t,e,r,n){let d=new ft(n);return d.addToTrace(`${t.constructor.name}.${e}(${r.map(c=>typeof c).join(",")})`),d}traceExecuteError(t){let e=new ft(t);return e.addToTrace("@execute"),this.handleSevereError(e),e}tracePluginError(t,e,r){let n=new ft(r);return n.addToTrace(`@plugin(${t.constructor.name}, '${e}')`),this.handleSevereError(n),n}traceApiError(t,e){let r=new ft(e);return r.addToTrace(`@api('${t}')`),this.handleSevereError(r),r}handleSevereError(t){for(let e of this.errorHandlers)try{e(t)}catch(r){}this.errors.length>10||this.errors.push({message:t.message,trace:t.trace})}applyErrorDecoration(t){var r;let e=(r=t.constructor.prototype.errorConfig)!=null?r:[];for(let{method:n}of e)this.errorHandlers.push(t.gateway[n])}applyPluginDecoration(t){var r;let e=(r=t.constructor.prototype.pluginConfig)!=null?r:[];for(let{PluggableClass:n,category:d,method:c}of e)this.getModule(n).pluginFunctions[d].push(t.gateway[c])}applyApiDecoration(t){var r;let e=(r=t.constructor.prototype.apiConfig)!=null?r:[];for(let{api:n,method:d}of e)Object.defineProperty(this.dvtag,n,{value:o((...c)=>{var p,S;try{return t.gateway[d](...c)}catch(T){return this.traceApiError(n,T),(S=(p=Xt)[n])==null?void 0:S.call(p,...c)}},"value"),writable:!1})}applyExecuteDecoration(t){return R(this,null,function*(){var r;let e=(r=t.constructor.prototype.executeConfig)!=null?r:[];for(let{method:n}of e)try{yield t.gateway[n]()}catch(d){this.traceExecuteError(d)}})}};o(Zt,"Core");var qt=Zt;s();a();s();a();var te=[],ee=te;var h=o(i=>{let t=i.prototype,e=Object.getOwnPropertyNames(t).filter(r=>{var n;return r!=="constructor"&&((n=Object.getOwnPropertyDescriptor(t,r))==null?void 0:n.value)instanceof Function});t.moduleConfig=e.map(r=>({method:r})),te.push(i)},"moduleClass"),N=o(i=>t=>{},"attachModule"),b=o((i,t)=>{var e;i.executeConfig=(e=i.executeConfig)!=null?e:[],i.executeConfig.push({method:t})},"executeMethod"),f=o((i,t)=>(e,r)=>{var n;e.pluginConfig=(n=e.pluginConfig)!=null?n:[],e.pluginConfig.push({PluggableClass:i,category:t,method:r})},"pluginMethod"),it=o(i=>(t,e)=>{var r;t.apiConfig=(r=t.apiConfig)!=null?r:[],t.apiConfig.push({api:i,method:e})},"apiMethod"),be=o((i,t)=>{var e;i.errorConfig=(e=i.errorConfig)!=null?e:[],i.errorConfig.push({method:t})},"errorMethod");s();a();s();a();var wt=o(i=>{if(i==null)return[];let t=we(i);return t!=null?[t]:Array.isArray(i)?i.map(we).filter(e=>e!=null):[]},"parseSlotSizes"),we=o(i=>{if(i==null)return null;if(typeof i=="string")return{label:i};if(Array.isArray(i)){if(i.length===1&&typeof i[0]=="string")return{label:i[0]};if(i.length===2&&typeof i[0]=="number"&&typeof i[1]=="number")return{width:i[0],height:i[1]}}if(typeof i=="object"){let{label:t,width:e,height:r}=i;if(typeof e=="number"&&typeof r=="number")return{width:e,height:r};if(typeof t=="string")return{label:t}}return null},"parseSlotSize");s();a();var xe=o(i=>{try{return i.getSizes()}catch(t){return[]}},"getGptSlotSizesSafe");s();a();var Vt=o(i=>{let t=i.split("/").map(n=>n.trim()).filter(n=>n.length>0);if(t.length<2)return;let e=t[0].split(",",1)[0],r=Number(e);return Number.isNaN(r)?void 0:`${r}`},"getNetworkCodeFromAdUnit");var Ft=o((i,t)=>{let e=i.getAdUnitPath(),r=Vt(e);return{id:e,network:r,sizes:wt(xe(i)),position:i.getTargeting(t)[0]}},"gptSlotToAdUnit");s();a();s();a();s();a();s();a();s();a();s();a();var re="dvp_spos";var K=class{_getAdServers(){try{return g}catch(t){return{}}}isAdServerConfigured(t){return t!=null&&t in this._getAdServers()}getAdServerConfig(t){var e;return t==null||!this.isAdServerConfigured(t)?{}:(e=this._getAdServers()[t])!=null?e:{}}getAdServerCustomTracking(t){var e;return t==null||!this.isAdServerConfigured(t)?{}:(e=this._getAdServers()[t].customTracking)!=null?e:{}}getAdServerId(t){if(!(t==null||!this.isAdServerConfigured(t)))return this._getAdServers()[t].adServerId}getAdPositionKey(t){var e,r;return t==null?re:(r=(e=this._getAdServers()[t])==null?void 0:e.adPositionKey)!=null?r:re}};o(K,"AdServers"),K=l([h],K);s();a();s();a();s();a();s();a();s();a();var D=[];for(let i=0;i<256;++i)D.push((i+256).toString(16).slice(1));function Pe(i,t=0){return(D[i[t+0]]+D[i[t+1]]+D[i[t+2]]+D[i[t+3]]+"-"+D[i[t+4]]+D[i[t+5]]+"-"+D[i[t+6]]+D[i[t+7]]+"-"+D[i[t+8]]+D[i[t+9]]+"-"+D[i[t+10]]+D[i[t+11]]+D[i[t+12]]+D[i[t+13]]+D[i[t+14]]+D[i[t+15]]).toLowerCase()}o(Pe,"unsafeStringify");s();a();var ie,gr=new Uint8Array(16);function oe(){if(!ie){if(typeof crypto=="undefined"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");ie=crypto.getRandomValues.bind(crypto)}return ie(gr)}o(oe,"rng");s();a();s();a();var mr=typeof crypto!="undefined"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),ne={randomUUID:mr};function pr(i,t,e){var n,d,c;if(ne.randomUUID&&!t&&!i)return ne.randomUUID();i=i||{};let r=(c=(d=i.random)!=null?d:(n=i.rng)==null?void 0:n.call(i))!=null?c:oe();if(r.length<16)throw new Error("Random bytes length must be >= 16");if(r[6]=r[6]&15|64,r[8]=r[8]&63|128,t){if(e=e||0,e<0||e+16>t.length)throw new RangeError(`UUID byte range ${e}:${e+15} is out of buffer bounds`);for(let p=0;p<16;++p)t[e+p]=r[p];return t}return Pe(r)}o(pr,"v4");var se=pr;var lt=o(()=>se(),"uuid");var ae=class ae{constructor(t,e,r,n=lt(),d=Date.now()){this.adServer=t;this.elementId=e;this.adUnit=r;this.uuid=n;this.creationTime=d;u(this,"_variables",new Map)}setVariable(t,e){this._variables.set(t,e)}getVariable(t){return this._variables.get(t)}hasVariable(t){return this._variables.has(t)}clearVariable(t){this._variables.delete(t)}};o(ae,"Slot");var Ut=ae;s();a();s();a();var y=class{constructor(){u(this,"plugins",{slotDiscovered:o((t,e)=>[],"slotDiscovered"),slotDestroyed:o(t=>[],"slotDestroyed")});u(this,"_slots",{})}getSlot(t,e){var r;return(r=this._slots[t])==null?void 0:r[e]}getSlots(t){var e;if(t==null){let r=[];for(let n of Object.values(this._slots))r.push(...Object.values(n));return r}return Object.values((e=this._slots[t])!=null?e:{})}createSlot(t,e,r,n,d){var S,T;let c=this.getSlot(t,r);c!=null&&this.plugins.slotDestroyed(c);let p=new Ut(t,r,n);return(T=(S=this._slots)[t])!=null||(S[t]={}),this._slots[t][r]=p,d==null||d(p),this.plugins.slotDiscovered(p,e),p}};o(y,"SlotStore"),y=l([h],y);s();a();s();a();s();a();var le=class le{set(t,e){t.setVariable(this,e)}get(t){return t.getVariable(this)}getOrDefault(t,e){return t.hasVariable(this)?this.get(t):(this.set(t,e),e)}getOrDefaultFromFunction(t,e){if(t.hasVariable(this))return this.get(t);let r=e();return this.set(t,r),r}delete(t){t.clearVariable(this)}};o(le,"SlotVariable");var O=le;s();a();var ot=o((...i)=>{let t=[];for(let e of i)if(e!=null)for(let r of e)t.includes(r)||t.push(r);return t},"mergeUnique");var v=class{constructor(){u(this,"plugins",{getAdServerTargeting:o((t,e)=>[],"getAdServerTargeting"),setAdServerTargeting:o((t,e,r)=>[],"setAdServerTargeting")});u(this,"globalTargeting",{});u(this,"slotTargeting",new O)}_getSlotTargeting(t){var r;let e=(r=this.slotTargeting.get(t))!=null?r:{};return this.slotTargeting.set(t,e),e}_getTargetingKeys(t){return ot(Object.keys(this.globalTargeting),Object.keys(this._getSlotTargeting(t)))}_getTargetingValues(t,e){return ot(this.globalTargeting[e],this._getSlotTargeting(t)[e])}getTargeting(t){let e={};if(t==null)for(let r of Object.keys(this.globalTargeting))e[r]=[...this.globalTargeting[r]];else for(let r of this._getTargetingKeys(t))e[r]=this._getTargetingValues(t,r);return e}setSlotTargeting(t,e,r=!1){var c;let n=Object.keys(e),d=this._getSlotTargeting(t);for(let p of n)d[p]=ot(e[p],r?(c=this.slotTargeting.get(t))==null?void 0:c[p]:null);this.setAdServerTargeting(t,n)}setGlobalTargeting(t,e=!1){let r=Object.keys(t);for(let n of r)this.globalTargeting[n]=ot(t[n],e?this.globalTargeting[n]:null);for(let n of this.core.get(y).getSlots())this.setAdServerTargeting(n,r)}getAdServerTargeting(t,e){var r;return(r=this.plugins.getAdServerTargeting(t,e).find(n=>n.length!==0))!=null?r:[]}setAdServerTargeting(t,e){e==null&&(e=this._getTargetingKeys(t));for(let r of e)this.plugins.setAdServerTargeting(t,r,this._getTargetingValues(t,r))}_onSlotDiscovered(t){this.setAdServerTargeting(t)}};o(v,"TargetingHub"),l([f(y,"slotDiscovered")],v.prototype,"_onSlotDiscovered",1),v=l([h],v);s();a();s();a();s();a();var hr=[[/((\?)|&)(?:amp_lite|fr=operanews)/g,"$2"],[/(^https?:\/\/)(www\.)/g,"$1"],[/(((\?)|&|%3F|%26|;)(?:utm_campaign|utm_source|utm_content|utm_term|utm_viral|utm_medium|utm_identifier|utm_key|fb_source|referrer|referer|ref|rand|rnd|randid|\.?rand|\.?partner|cb|count|adid|session|sessionid|session_redirect|param\d|userinfo|uid|refresh|ocid|ncid|clickenc|fbclid|amp_js_v|amp_gsa|ns_source|ns_campaign|ns_mchanel|ns_mchannel|ns_linkname|ns_fee|src|ex_cid|usqp|source|xid|trkid|utm_social-type|mbid|utm_brand|__twitter_impression|utm_referrer|CMP|cmp|_cmp|cq_cmp)=[^&]*)/g,"$3"],[/[/.]amp(?:\/[?&]*)?$/g,""],[/((\?)|&)(?:outputType|isFollow|suppressMediaBar|cid|ICID|icid|bdk|wtu_id_h|utm_placement|intcmp|_native_ads|traffic_source|entry|\.tsrc|autoplay|autostart|dc_data|influencer|pubdate|utm_hp_ref|redirect|service|refresh_ce|refresh_cens|xcmg|target_id|_amp)=[^&]*/g,"$2"],[/(\?|&)(?:amp)(?:&|$|=[^&]*)/g,"$1"]],fr=[[/(?:\/|\/\?|\?|&|\/\$0|#[\s\S]*)+$/g,""],[/(?:\/|\/\?|\?|&|\/\$0|#[\s\S]*)+$/g,""]],De=o((i,t)=>{for(let[e,r]of i)t=t.replace(e,r);return t},"replaceByRules"),Ie=o(i=>{let t=De(hr,i);return De(fr,t)},"normalizeUrl");s();a();var Ce=o(i=>i.split("?",1)[0].split("#",1)[0],"stripUrlQuery");s();a();var qe=o((i,t)=>{try{let e=new URLSearchParams(i),r=e.get("ctx"),n=e.get("cmp");if(r!=null&&n!=null)return{ctx:r,cmp:n,prefetch:t,legacy:!0}}catch(e){}return null},"parseInfo"),Ue=o(i=>{var t;return i.pathname!=="/signals/pub.js"?null:(t=qe(i.search,!0))!=null?t:qe(i.hash.substring(1),!1)},"parseLegacyPagetagUrl");var Sr=1e3,Tr=/^\/dvtag\/([^/]+)\/([^/]+)\/pub\.js$/,w=class{constructor(){u(this,"visit");u(this,"tagInfo");u(this,"plugins",{newVisit:o(t=>[],"newVisit")});u(this,"_normalizeUrl",Ie)}_initialize(){this.getTagInfo(),this.updateVisit(!1),this.plugins.newVisit(this.visit),this._installNavigationListener()}getTagInfo(){var t;if(this.tagInfo==null){try{this.tagInfo=this._parseTagInfo()}catch(e){}(t=this.tagInfo)!=null||(this.tagInfo={ctx:"unknown",cmp:"unknown"})}return this.tagInfo}_parseTagInfo(){let t=this.getCurrentScriptSrc();if(t==null)return null;let e=new URL(t,"https://pub.doubleverify.com"),r=e.pathname,n=Tr.exec(r);if(n!=null){let[,d,c]=n;return{ctx:d,cmp:c}}return Ue(e)}getCurrentScriptSrc(){var t,e;return(e=(t=this.core.window.document.currentScript)==null?void 0:t.getAttribute("src"))!=null?e:null}updateVisit(t=!0){var r,n;let e=this.getStrippedPageUrl();if(this.visit==null||this.visit.strippedUrl!==e){let d=lt();this.visit={strippedUrl:e,normalizedUrl:this._normalizeUrl(this.core.window.location.href),uuid:d,sessionUuid:(n=(r=this.visit)==null?void 0:r.sessionUuid)!=null?n:d},t&&this.plugins.newVisit(this.visit)}return this.visit}getVisit(){var t;return(t=this.visit)!=null?t:this.updateVisit(!1)}getStrippedPageUrl(){return Ce(this.core.window.location.href)}getNormalizedPageUrl(){return this.getVisit().normalizedUrl}getVisitUuid(){return this.getVisit().uuid}getSessionUuid(){return this.getVisit().sessionUuid}_installNavigationListener(){let{window:t}=this.core,e=o(()=>this.updateVisit(!0),"cb");t.navigation!=null?t.navigation.addEventListener("navigatesuccess",e):setInterval(e,Sr)}};o(w,"Context"),l([b],w.prototype,"_initialize",1),w=l([h],w);s();a();s();a();var ue=class ue{constructor(){u(this,"pending",[]);u(this,"flushing",!1)}push(t){this.pending.push(t),this.flush()}flush(){return R(this,null,function*(){var e;if(this.flushing)return;this.flushing=!0;let t=this.pending.shift();for(;t!=null;){try{yield t.promise}catch(r){}try{(e=t.callback)==null||e.call(t)}catch(r){}t=this.pending.shift()}this.flushing=!1})}};o(ue,"AsyncQueue");var Qt=ue;var A=class{constructor(){u(this,"plugins",{adRequestQueued:o(t=>[],"adRequestQueued"),adRequestTimedOut:o(t=>[],"adRequestTimedOut"),adRequestBeforeRelease:o(t=>[],"adRequestBeforeRelease"),adRequestCompleted:o(t=>[],"adRequestCompleted")});u(this,"queue",new Qt);u(this,"adRequestCounter",0)}_queueAdRequest(t={}){var d,c;let e={index:this.adRequestCounter++,status:"queued",timeoutValue:(d=t.timeout)!=null?d:0,onDvtagReadyCalled:(c=t.timestamp)!=null?c:0,waitingStarted:new Date().getTime(),internal:t.internal};this.core.get(w).updateVisit(),this.plugins.adRequestQueued(e);let r=t.callback;r===void 0?t.callback=()=>{}:r===null?e.status="tag-timeout":t.callback=()=>{e.status="queue-timeout",e.callbackCalled=new Date().getTime(),t.callback=null,this.plugins.adRequestTimedOut(e);try{r()}catch(p){}};let n=o(()=>{if(t.callback!=null){t.callback=null,e.status="success",e.callbackCalled=new Date().getTime(),this.plugins.adRequestBeforeRelease(e);try{r==null||r()}catch(p){}}else this.plugins.adRequestBeforeRelease(e);e.waitingEnded=new Date().getTime(),this.plugins.adRequestCompleted(e)},"onAsyncOperationsCompleted");this.queue.push({callback:n,adRequest:e})}delayAdRequests(t){this.queue.push({promise:t})}};o(A,"AdRequestQueue"),l([it("queueAdRequest")],A.prototype,"_queueAdRequest",1),A=l([h],A);s();a();s();a();s();a();var W=class{getShortCommitId(){return"87dfc3b"}getBuildTimestamp(){return 1740322825504}getAuthToken(){return"LGD+ZkMpRiysft3EEjx4n/HuBPXDeYK8z4MSWEroYW2TMJ/+6D5uIdK8ckz/Of5aiuscHEUEaz0x351SASCgX0Dr0YXJACBYtmogEw2JJ/uymZvu5cKGCoz0UceavjFxaO/OblIYfohcoxZTZyYT6hIJb3cgohPgKv+0Uw=="}};o(W,"DefinedVariables"),W=l([h],W);var L=class{constructor(){u(this,"cache",{})}_performFetchJson(t,e){return R(this,null,function*(){let r=t;if(e!=null&&e.authToken){let c=this.core.get(W).getAuthToken(),p=new URL(t);p.searchParams.set("token",c),r=p.href}let n=yield this.core.window.fetch(r);return{json:yield n.json(),headers:n.headers}})}fetchJson(t,e){return R(this,null,function*(){let r=this.cache[t];return r==null&&(r=this._performFetchJson(t,e).then(n=>n.json),this.cache[t]=r),r})}};o(L,"Fetch"),L=l([h],L);s();a();var Ot=["BSC","ABS","CCT","CBS"],de=["IDS"],kt=["VLP","TVP"],yr=[...Ot,...de,...kt],Rs=[...Ot,...de,...kt].filter(i=>i!=="CCT"),Oe=o(i=>yr.includes(i.toUpperCase()),"isSignal"),ke=o(i=>kt.includes(i.toUpperCase()),"isSlotSignal"),Me=o(i=>de.includes(i.toUpperCase()),"isUserSignal"),Ne=o(i=>Ot.includes(i.toUpperCase()),"isPageSignal");s();a();s();a();var Gt=o(i=>i==null?"":`@${i}`,"getPositionSuffix");s();a();var Ar=/^(\d+)x(\d+)$/,Le=o(i=>i==="all"?[]:i.split(",").map(t=>{let e=t.match(Ar);return e==null?{label:t}:{width:parseInt(e[1],10),height:parseInt(e[2],10)}}),"stringToSlotSizes"),ce=o(i=>i.length===0?"all":i.map(({width:t,height:e,label:r})=>r!=null?r:`${t}x${e}`).join(","),"slotSizesToString"),Ve=o(i=>i==null?"":i.length>0&&i.every(({label:r})=>r==null)?ce(i):"","slotSizesToStringIfSpecific");var _r="https://pub.doubleverify.com/dvtag/signals/",V=class{_getBaseUrl(t){let e=this.core.get(w),{ctx:r,cmp:n}=e.getTagInfo(),d=e.getNormalizedPageUrl();try{d=new URL(d).origin}catch(p){}let c=new URL(t,_r);return c.searchParams.set("ctx",r),c.searchParams.set("cmp",n),c.searchParams.set("url",d),c}getUserTargetingUrl(t){let e=this._getBaseUrl("ids/pub.json");return t.includes("IDS")&&e.searchParams.set("ids","1"),e.href}getPageTargetingUrl(t,e){let r=this._getBaseUrl("bsc/pub.json");return r.searchParams.set("url",e),t.includes("BSC")&&r.searchParams.set("bsc","1"),t.includes("ABS")&&r.searchParams.set("abs","1"),t.includes("CBS")&&r.searchParams.set("cbs","1"),t.includes("CCT")&&r.searchParams.set("cct","1"),r.href}getSlotTargetingUrl(t,e){var d;let r=this._getBaseUrl("vlp/pub.json");t.includes("VLP")&&r.searchParams.set("vlp","1"),t.includes("TVP")&&r.searchParams.set("tvp","1");let n=0;for(let c of e){let{id:p,position:S,sizes:T}=(d=c.adUnit)!=null?d:{},E=p+Gt(S);r.searchParams.set(`slot-${n++}-${E}`,Ve(T))}return r.href}};o(V,"SignalsUrlBuilder"),V=l([h],V);var ut=class{constructor(){u(this,"cache",{})}_fetchFreshSignals(t,e){return R(this,null,function*(){if(!e.some(Ne))return{};let r=this.core.get(V).getPageTargetingUrl(e,t),n;try{n=yield this.core.get(L).fetchJson(r,{authToken:!0})}catch(d){return{}}return n instanceof Object?n:{}})}fetchSignals(t,e=3){return R(this,null,function*(){let r=this.core.get(w),n=r.getNormalizedPageUrl(),d=r.getStrippedPageUrl();this.cache[d]==null&&(this.cache[d]=this._fetchFreshSignals(n,t));let c=yield this.cache[d];return this.core.get(w).getStrippedPageUrl()!==d&&e>0?this.fetchSignals(t,e-1):c})}};o(ut,"PageSignals"),ut=l([h],ut);s();a();var dt=class{constructor(){u(this,"cache",{});u(this,"pendingSlots",[]);u(this,"pendingBulkRequest",null)}_scheduleBulkRequest(t){return R(this,null,function*(){yield Promise.resolve();let e=this.core.get(V).getSlotTargetingUrl(t,this.pendingSlots);this.pendingSlots=[],this.pendingBulkRequest=null;let r;try{r=yield this.core.get(L).fetchJson(e,{authToken:!0})}catch(n){return[]}return r})}_fetchFreshSignals(t,e){return R(this,null,function*(){if(!e.some(ke))return{};let r=this.pendingSlots.push(t)-1;this.pendingBulkRequest==null&&(this.pendingBulkRequest=this._scheduleBulkRequest(e));let d=(yield this.pendingBulkRequest)[r];return d instanceof Object?d:{}})}_getCacheKey(t){var p,S;let{id:e,position:r,sizes:n}=(p=t.adUnit)!=null?p:{},d=e+Gt(r),c=(S=n==null?void 0:n.map(T=>{var E;return(E=T.label)!=null?E:`${T.width}x${T.height}`}).sort().join(","))!=null?S:"";return`${d}#${c}`}fetchSignals(t,e){return R(this,null,function*(){let r=this._getCacheKey(t);return this.cache[r]==null&&(this.cache[r]=this._fetchFreshSignals(t,e)),this.cache[r]})}};o(dt,"SlotSignals"),dt=l([h],dt);s();a();var ct=class{constructor(){u(this,"cache")}_fetchFreshSignals(t){return R(this,null,function*(){if(!t.some(Me))return{};let e=this.core.get(V).getUserTargetingUrl(t),r;try{r=yield this.core.get(L).fetchJson(e,{authToken:!0})}catch(n){return{}}return r instanceof Object?r:{}})}fetchSignals(t){return R(this,null,function*(){return this.cache==null&&(this.cache=this._fetchFreshSignals(t)),this.cache})}};o(ct,"UserSignals"),ct=l([h],ct);var _=class{constructor(){u(this,"plugins",{getEnabledSignals:o(()=>[],"getEnabledSignals"),userTargetingUpdated:o(t=>[],"userTargetingUpdated"),pageTargetingUpdated:o(t=>[],"pageTargetingUpdated"),slotTargetingUpdated:o((t,e)=>[],"slotTargetingUpdated")});u(this,"dataForMigrationTracking",{userTargeting:{},pageTargeting:{},slotTargeting:new Map})}getEnabledSignals(){return this.plugins.getEnabledSignals()}getDataForMigrationTracking(){return this.dataForMigrationTracking}_initialize(){this.getUserTargeting(),this.getPageTargeting()}_onAdRequestQueued(){this.getPageTargeting()}_onSlotDiscovered(t){this.getSlotTargeting(t)}getUserTargeting(){return R(this,null,function*(){let t=this._fetchUserTargeting();return this.core.get(A).delayAdRequests(t),t})}getPageTargeting(){return R(this,null,function*(){let t=this._fetchPageTargeting();return this.core.get(A).delayAdRequests(t),t})}getSlotTargeting(t){return R(this,null,function*(){let e=this._fetchSlotTargeting(t);return this.core.get(A).delayAdRequests(e),e})}_fetchUserTargeting(){return R(this,null,function*(){let t=yield this.core.get(ct).fetchSignals(this.getEnabledSignals());return this.core.get(v).setGlobalTargeting(t),this.dataForMigrationTracking.userTargeting=t,this.plugins.userTargetingUpdated(t),t})}_fetchPageTargeting(){return R(this,null,function*(){let t=yield this.core.get(ut).fetchSignals(this.getEnabledSignals());return this.core.get(v).setGlobalTargeting(t),this.dataForMigrationTracking.pageTargeting=t,this.plugins.pageTargetingUpdated(t),t})}_fetchSlotTargeting(t){return R(this,null,function*(){let e=yield this.core.get(dt).fetchSignals(t,this.getEnabledSignals());return this.core.get(v).setSlotTargeting(t,e),this.dataForMigrationTracking.slotTargeting.set(t,e),this.plugins.slotTargetingUpdated(t,e),e})}};o(_,"Signals"),l([b],_.prototype,"_initialize",1),l([f(A,"adRequestQueued")],_.prototype,"_onAdRequestQueued",1),l([f(y,"slotDiscovered")],_.prototype,"_onSlotDiscovered",1),_=l([h],_);s();a();var F=class{constructor(){u(this,"pq",null)}getPq(){return this.pq==null&&(this.pq=this._initialize()),this.pq}getPts(){return this.getPq().PTS}setApi(t){let e=this.getPq();e!=null&&(e.init=()=>{},e.loadSignals=t.loadSignals,e.loadSignalsForSlots=t.loadSignalsForSlots,e.getTargeting=t.getTargeting)}_pushToDvtagCmd(...t){var e;this.core.dvtag.cmd=(e=this.core.dvtag.cmd)!=null?e:[],this.core.dvtag.cmd.push(...t)}_initialize(){var r,n;this.core.window.PQ=(r=this.core.window.PQ)!=null?r:{};let t=this.core.window.PQ;if(t.loaded)return{cmd:[],PTS:{}};t.loaded=!0,t.PTS=(n=t.PTS)!=null?n:{};let e=t.cmd;return t.cmd={push:o(d=>this._pushToDvtagCmd(d),"push")},Array.isArray(e)&&this._pushToDvtagCmd(...e),t}};o(F,"LegacyPq"),F=l([h],F);s();a();var Fe=o(i=>{var r,n,d;let t=lt(),e={id:(n=(r=i.adUnitPath)!=null?r:i.invCode)!=null?n:i.tagId,sizes:wt(Le((d=i.sizes)!=null?d:"all")),position:i.position};return{elementId:t,adUnit:e}},"parseLegacyAdUnit");s();a();var Qe=o((i,t)=>{var n;let e=(n=i.IDS)==null?void 0:n[0];if(e==null)return;let r=parseInt(e);isNaN(r)||(t.IDS=r)},"setUserTargetingOnPts"),Ge=o((i,t)=>{for(let e of Ot)i[e]!=null&&(t[e]=i[e])},"setPageTargetingOnPts"),ze=o((i,t,e)=>{var p,S,T,E,rt,j;let{adUnit:r}=i;if((r==null?void 0:r.id)==null)return;let n=r.id,d=ce((p=r.sizes)!=null?p:[]),c=r.position;for(let C of kt){let at=t[C];at!=null&&((S=e[C])!=null||(e[C]={}),(E=(T=e[C])[n])!=null||(T[n]={}),e[C][n][d]=at[0],c!=null&&((j=(rt=e[C][n])[c])!=null||(rt[c]={}),e[C][n][c][d]=at[0]))}},"setSlotTargetingOnPts");var $=class extends x{_initialize(){this.core.get(F).setApi({loadSignals:this.loadSignals.bind(this),loadSignalsForSlots:this.loadSignalsForSlots.bind(this),getTargeting:this.getTargeting.bind(this)})}_setUserTargetingOnPts(t){let e=this.core.get(F).getPts();Qe(t,e)}_setPageTargetingOnPts(t){let e=this.core.get(F).getPts();Ge(t,e)}_setSlotTargetingOnPts(t,e){let r=this.core.get(F).getPts();ze(t,e,r)}loadSignals(t,e){return R(this,null,function*(){yield this._onDvtagReady("loadSignals",e)})}loadSignalsForSlots(t,e,r){return R(this,null,function*(){let n=this.core.get(_),d=this.core.get(y);for(let p of t){let S=p.getSlotElementId(),T=d.getSlot("gpt",S);if(T==null){let E=this.core.get(K).getAdPositionKey(p.getAdUnitPath());T=d.createSlot("gpt",0,S,Ft(p,E))}n.getSlotTargeting(T)}let c=typeof e=="function"?e:r;yield this._onDvtagReady("loadSignalsForSlots",c)})}getTargeting(t,e){return R(this,null,function*(){var c;let r=this.core.get(_),n=this.core.get(y);for(let p of(c=t.adUnits)!=null?c:[]){let{elementId:S,adUnit:T}=Fe(p),E=n.createSlot("legacy-api",0,S,T);r.getSlotTargeting(E)}let d=o(()=>e==null?void 0:e(void 0,this.core.get(F).getPts()),"callback");yield this._onDvtagReady("getTargeting",d)})}_getPubAdsTargeting(t){var e,r,n;return(n=(r=(e=this.core.window.googletag)==null?void 0:e.pubads)==null?void 0:r.call(e).getTargeting(t))!=null?n:[]}_onDvtagReady(t,e){return R(this,null,function*(){yield new Promise(r=>{this.core.window.dvtag.queueAdRequest({callback:o(()=>{try{e==null||e()}catch(n){}r()},"callback"),timestamp:new Date().getTime(),timeout:750,internal:!0})})})}};o($,"LegacyLayer"),l([b],$.prototype,"_initialize",1),l([f(_,"userTargetingUpdated")],$.prototype,"_setUserTargetingOnPts",1),l([f(_,"pageTargetingUpdated")],$.prototype,"_setPageTargetingOnPts",1),l([f(_,"slotTargetingUpdated")],$.prototype,"_setSlotTargetingOnPts",1),$=l([h],$);s();a();var Tt=class extends x{_getEnabledSignals(){return"IDS"}};o(Tt,"SignalsIds"),l([f(_,"getEnabledSignals")],Tt.prototype,"_getEnabledSignals",1),Tt=l([h],Tt);s();a();var Rt=class extends x{_getEnabledSignals(){return"BSC"}};o(Rt,"SignalsBsc"),l([f(_,"getEnabledSignals")],Rt.prototype,"_getEnabledSignals",1),Rt=l([h],Rt);s();a();var yt=class extends x{_getEnabledSignals(){return"VLP"}};o(yt,"SignalsVlp"),l([f(_,"getEnabledSignals")],yt.prototype,"_getEnabledSignals",1),yt=l([h],yt);s();a();var At=class extends x{_getEnabledSignals(){return"TVP"}};o(At,"SignalsTvp"),l([f(_,"getEnabledSignals")],At.prototype,"_getEnabledSignals",1),At=l([h],At);s();a();var _t=class extends x{_getEnabledSignals(){return"ABS"}};o(_t,"SignalsAbs"),l([f(_,"getEnabledSignals")],_t.prototype,"_getEnabledSignals",1),_t=l([h],_t);s();a();var vt=class extends x{_getEnabledSignals(){return"CBS"}};o(vt,"SignalsCbs"),l([f(_,"getEnabledSignals")],vt.prototype,"_getEnabledSignals",1),vt=l([h],vt);s();a();s();a();s();a();s();a();s();a();var P=class{getWindow(){return this.core.window}getDocument(){return this.getWindow().document}getUserAgent(){var t,e;return(e=(t=this.getWindow().navigator)==null?void 0:t.userAgent)!=null?e:""}getPageUrl(){var t,e;return(e=(t=this.getWindow().location)==null?void 0:t.href)!=null?e:""}getHostname(){return new URL(this.getPageUrl()).hostname}getNavigator(){return this.getWindow().navigator}getPerformance(){var t;return(t=this.getWindow().performance)!=null?t:{}}getPerformanceTimeMs(){var t,e,r;return Math.floor((r=(e=(t=this.getPerformance()).now)==null?void 0:e.call(t))!=null?r:null)}isInQuirksMode(){return this.getDocument().compatMode==="BackCompat"}getDOMParser(){let t=this.getWindow().DOMParser;return new t}};o(P,"Environment"),P=l([h],P);var He={gpt:"google_ads_iframe_",ast:"utif_"},gt=class{_getIframeDocument(t){try{return t.contentDocument}catch(e){return null}}_isIframeSameOrigin(t,e){if(e==null)return!1;if(t.src===""||t.src==="about:blank")return!0;let r=this.core.get(P).getPageUrl();try{return new URL(t.src).origin===new URL(r).origin}catch(n){return!1}}_findIframe(t,e){if(He[e]==null)return null;let n=t.querySelectorAll(`iframe[id^="${He[e]}"]`);return n.length===1?n[0]:null}getAdContainer(t,e){if((e==null?void 0:e.type)!=="display")return{};let{elementId:r,adServer:n}=t,c=this.core.get(P).getDocument().getElementById(r);if(c==null)return{};let p=this._findIframe(c,n);if(p==null)return{slotElement:c};let S=this._getIframeDocument(p);return this._isIframeSameOrigin(p,S)?{slotElement:c,sameOriginIframe:p,sameOriginIframeDocument:S}:{slotElement:c,crossOriginIframe:p}}};o(gt,"AdLocator"),gt=l([h],gt);s();a();var X=class{constructor(){u(this,"plugins",{adRemoved:o(t=>[],"adRemoved")})}_monitorAdRemoval(t){let e=this.core.get(P).getDocument().getElementById(t.elementId);if(e==null)return;new MutationObserver(n=>{let d=n.length,c=0,p=e.children.length;for(let S=n.length-1;S>=0;S--){let T=n[S];if(p===0){this.plugins.adRemoved(t);break}if(c===d-1)break;let E=T.removedNodes.length-T.addedNodes.length;p+=E,c++}}).observe(e,{childList:!0})}_onSlotDestroyed(t){this.plugins.adRemoved(t)}};o(X,"AdRemoved"),l([f(y,"slotDiscovered")],X.prototype,"_monitorAdRemoval",1),l([f(y,"slotDestroyed")],X.prototype,"_onSlotDestroyed",1),X=l([h],X);var q=class{constructor(){u(this,"adEmpty",new O);u(this,"adRequestInFlight",new O);u(this,"nonEmptyAdResponses",new O);u(this,"plugins",{adRequested:o(t=>[],"adRequested"),adRequestedOrInferred:o(t=>[],"adRequestedOrInferred"),adRendered:o((t,e,r)=>[],"adRendered"),adRemoved:o(t=>[],"adRemoved")})}setAdRequested(t){this.adRequestInFlight.set(t,!0),this.plugins.adRequested(t),this.plugins.adRequestedOrInferred(t)}setAdRendered(t,e){this.adRequestInFlight.get(t)!==!0&&this.plugins.adRequestedOrInferred(t),this._setAdRemoved(t),this.adEmpty.set(t,!1),this.adRequestInFlight.set(t,!1),e!=null&&this.nonEmptyAdResponses.set(t,this.nonEmptyAdResponses.getOrDefault(t,0)+1);let r=this.core.get(gt).getAdContainer(t,e);this.plugins.adRendered(t,e,r)}_setAdRemoved(t){this.adEmpty.get(t)===!1&&(this.adEmpty.set(t,!0),this.plugins.adRemoved(t))}getNonEmptyAdRenderedCount(t){return this.nonEmptyAdResponses.getOrDefault(t,0)}};o(q,"AdServerHub"),l([f(X,"adRemoved")],q.prototype,"_setAdRemoved",1),q=l([h],q);s();a();s();a();var Ht=o(i=>{if(typeof i=="string"||Array.isArray(i)&&i.length===2&&i.every(t=>typeof t=="number"))return i;if(i!=null&&typeof i.width=="number"&&typeof i.height=="number")return[i.width,i.height]},"cleanSizeInput");s();a();var k=o(i=>{if(typeof i=="string")return i;if(typeof i=="number")return`${i}`},"cleanStringInput");s();a();var Q=class{getPubAds(){var e,r;let t=this.core.get(P).getWindow();try{return(r=(e=t.googletag)==null?void 0:e.pubads)==null?void 0:r.call(e)}catch(n){return}}onPubAdsReady(t){var n,d,c,p;let e=this.core.get(P).getWindow();e.googletag=(n=e.googletag)!=null?n:{},e.googletag.cmd=(d=e.googletag.cmd)!=null?d:[];let r=this.getPubAds();if(r!=null)t(r);else try{(p=(c=e.googletag.cmd)==null?void 0:c.push)==null||p.call(c,()=>{r=this.getPubAds(),r!=null&&t(r)})}catch(S){}}};o(Q,"GoogletagPubAds"),Q=l([h],Q);s();a();var M=class{constructor(){u(this,"gptReference",new O)}_scanForSlots(){this.core.get(Q).onPubAdsReady(t=>{t.getSlots().map(e=>this.maybeDiscoverSlot(e,0))})}getGptSlot(t){return this.gptReference.get(t)}maybeDiscoverSlot(t,e){let r=this.core.get(y).getSlot("gpt",t.getSlotElementId());return r==null||this.gptReference.get(r)!==t?this._createSlot(t,e):r}_createSlot(t,e){let r=t.getSlotElementId(),n=t.getAdUnitPath(),d=Vt(n),c=this.core.get(K).getAdPositionKey(d),p=Ft(t,c);return this.core.get(y).createSlot("gpt",e,r,p,T=>this.gptReference.set(T,t))}};o(M,"GoogletagSlots"),l([b,f(A,"adRequestQueued")],M.prototype,"_scanForSlots",1),M=l([h],M);var J=class{constructor(){u(this,"plugins",{adRequested:o(t=>[],"adRequested"),adRendered:o((t,e)=>[],"adRendered")})}_getHtmlSafe(t){var e,r;try{return(r=(e=t.getHtml)==null?void 0:e.call(t))!=null?r:void 0}catch(n){return}}_initialize(){this.core.get(Q).onPubAdsReady(t=>{t.addEventListener("slotRequested",e=>{let r=this.core.get(M).maybeDiscoverSlot(e.slot,1);this.plugins.adRequested(r)}),t.addEventListener("slotRenderEnded",e=>{let r=this.core.get(M).maybeDiscoverSlot(e.slot,2);if(e.isEmpty){this.plugins.adRendered(r,null);return}let n={type:"display",advertiserId:k(e.advertiserId),campaignId:k(e.campaignId),creativeId:k(e.creativeId),lineItemId:k(e.lineItemId),renderedSize:Ht(e.size),html:this._getHtmlSafe(e.slot)};this.plugins.adRendered(r,n)})})}};o(J,"GoogletagEvents"),l([b],J.prototype,"_initialize",1),J=l([h],J);s();a();s();a();var ge=o(i=>typeof i=="string"||typeof i=="number"?[`${i}`]:i instanceof Array?ot(i.filter(t=>typeof t=="string"||typeof t=="number").map(t=>`${t}`)):[],"cleanTargetingInput");var nt=class{getAdServerTargeting(t,e){var d,c,p;if(t.adServer!=="gpt")return[];let r=[];try{r=ge((c=(d=this.core.get(Q).getPubAds())==null?void 0:d.getTargeting)==null?void 0:c.call(d,e))}catch(S){}let n=[];try{n=ge((p=this.core.get(M).getGptSlot(t))==null?void 0:p.getTargeting(e))}catch(S){}return ot(r,n)}setAdServerTargeting(t,e,r){var n;if(t.adServer==="gpt")try{(n=this.core.get(M).getGptSlot(t))==null||n.setTargeting(e,r)}catch(d){}}};o(nt,"GoogletagTargeting"),nt=l([h],nt);var G=class{_onAdRequested(t){this.core.get(q).setAdRequested(t)}_onAdRendered(t,e){this.core.get(q).setAdRendered(t,e)}_getAdServerTargeting(t,e){return t.adServer!=="gpt"?[]:this.core.get(nt).getAdServerTargeting(t,e)}_setAdServerTargeting(t,e,r){t.adServer==="gpt"&&this.core.get(nt).setAdServerTargeting(t,e,r)}};o(G,"Googletag"),l([f(J,"adRequested")],G.prototype,"_onAdRequested",1),l([f(J,"adRendered")],G.prototype,"_onAdRendered",1),l([f(v,"getAdServerTargeting")],G.prototype,"_getAdServerTargeting",1),l([f(v,"setAdServerTargeting")],G.prototype,"_setAdServerTargeting",1),G=l([h],G);s();a();s();a();var Ye=o((i,t=!0)=>{let e=document.createElement("script");return e.setAttribute("src",i),t&&e.setAttribute("async",""),e},"createScriptElement");s();a();s();a();var mt=o(()=>{var i,t,e;return Math.floor((e=(t=(i=window.performance)==null?void 0:i.now)==null?void 0:t.call(i))!=null?e:Date.now())},"perfNowOrDateNow");s();a();var me=class me{constructor(){u(this,"_firstQueuedAdRequest",1/0);u(this,"_lastQueuedAdRequest",-1/0);u(this,"_firstReleasedAdRequest",1/0);u(this,"_lastReleasedAdRequest",-1/0);u(this,"_lastReleasedAdRequestTime",null);u(this,"_hasBeenSuccessful",!1)}setAdRequestQueued(t){this._firstQueuedAdRequest=Math.min(this._firstQueuedAdRequest,t),this._lastQueuedAdRequest=Math.max(this._lastQueuedAdRequest,t)}setAdRequestReleased(t){this._firstReleasedAdRequest=Math.min(this._firstReleasedAdRequest,t),this._lastReleasedAdRequest=Math.max(this._lastReleasedAdRequest,t),this._lastReleasedAdRequestTime=mt()}getLastQueuedAdRequest(){return Number.isFinite(this._lastQueuedAdRequest)?this._lastQueuedAdRequest:null}getLastReleasedAdRequest(){return Number.isFinite(this._lastReleasedAdRequest)?this._lastReleasedAdRequest:null}getLastReleasedAdRequestTime(){return this._lastReleasedAdRequestTime}getLastSuccessfulAdRequest(){let t=Math.max(this._firstQueuedAdRequest,this._firstReleasedAdRequest),e=Math.min(this._lastQueuedAdRequest,this._lastReleasedAdRequest);return e<t?null:e}getPreviouslySuccessful(){return this._hasBeenSuccessful}markAdServerAdRequest(){this.getLastSuccessfulAdRequest()!=null&&(this._hasBeenSuccessful=!0),this._firstQueuedAdRequest=1/0,this._lastQueuedAdRequest=-1/0,this._firstReleasedAdRequest=1/0,this._lastReleasedAdRequest=-1/0,this._lastReleasedAdRequestTime=null}};o(me,"SlotAdRequestTracker");var Bt=me;s();a();var Yt=(c=>(c.UNKNOWN="UNKNOWN",c.SEEN="SEEN",c.NOT_READY="NOT_READY",c.POSSIBLE_TIMEOUT="POSSIBLE_TIMEOUT",c.PREV_READY="PREV_READY",c.READY="READY",c))(Yt||{});var pe="dv_upt_slot_ready",vr=["https://securepubads.g.doubleclick.net/gampad/ads?","https://pagead2.googlesyndication.com/gampad/ads?"],Er=750,I=class{constructor(){u(this,"plugins",{onSlotRequested:o(()=>[],"onSlotRequested"),onSlotRequestValidated:o(()=>[],"onSlotRequestValidated")});u(this,"validateAdRequests",!1);u(this,"lastAdRequestQueued",null);u(this,"lastAdRequestReleased",null);u(this,"state",{adRequestTracker:new O,triggered:new O})}_getSlotAdRequestTracker(t){return this.state.adRequestTracker.getOrDefaultFromFunction(t,()=>new Bt)}_onAdRequestQueued({index:t}){this.lastAdRequestQueued=t;for(let e of this.core.get(y).getSlots())this._getSlotAdRequestTracker(e).setAdRequestQueued(t),this.state.triggered.set(e,!1)}_onAdRequestBeforeRelease({index:t}){let e=this.core.get(v);this.lastAdRequestReleased=t;for(let r of this.core.get(y).getSlots())this._getSlotAdRequestTracker(r).setAdRequestReleased(t),this.validateAdRequests&&e.setSlotTargeting(r,{[pe]:["1"]})}_onSlotDiscovered(t,e){e===0&&this.lastAdRequestQueued!=null&&this._getSlotAdRequestTracker(t).setAdRequestQueued(this.lastAdRequestQueued)}_determineReadyState(t){let e=this._getSlotAdRequestTracker(t),r=e.getLastQueuedAdRequest(),n=e.getLastSuccessfulAdRequest(),d=e.getPreviouslySuccessful();return n!=null?"READY":d?"PREV_READY":r!=null?"NOT_READY":Date.now()-t.creationTime>Er?"SEEN":"UNKNOWN"}getSlotReadyStateOnAdServerAdRequest(t){let e=this._determineReadyState(t);if(e==="READY"){if(this.state.triggered.get(t)===!0)return{readyState:"PREV_READY"};this.state.triggered.set(t,!0);let r=this._getSlotAdRequestTracker(t).getLastReleasedAdRequestTime();return{readyState:e,readyFor:mt()-r}}return{readyState:e}}_onSlotRequested(t){let{readyState:e,readyFor:r}=this.getSlotReadyStateOnAdServerAdRequest(t);this._getSlotAdRequestTracker(t).markAdServerAdRequest(),this.validateAdRequests&&this.core.get(v).setSlotTargeting(t,{[pe]:["0"]}),this.plugins.onSlotRequested(t,e,r)}enableAdRequestValidation(){if(!this.validateAdRequests)try{let t=this._processResourceRequest.bind(this);new PerformanceObserver(r=>r.getEntries().forEach(t)).observe({type:"resource"}),this.validateAdRequests=!0}catch(t){}}_processResourceRequest(t){var e,r,n;try{if(vr.every(p=>!t.name.startsWith(p)))return;let c=(r=(e=new URL(t.name).searchParams.get("prev_scp"))==null?void 0:e.split("|"))!=null?r:[];for(let p of c){let T=((n=new URLSearchParams(p).get(pe))==null?void 0:n[0])==="1";this.plugins.onSlotRequestValidated(T)}}catch(d){}}};o(I,"SlotReadinessTracker"),l([f(A,"adRequestQueued")],I.prototype,"_onAdRequestQueued",1),l([f(A,"adRequestBeforeRelease"),f(A,"adRequestTimedOut")],I.prototype,"_onAdRequestBeforeRelease",1),l([f(y,"slotDiscovered")],I.prototype,"_onSlotDiscovered",1),l([f(q,"adRequested")],I.prototype,"_onSlotRequested",1),I=l([h],I);var he="__dvtag_debug_mode",je="1",z=class{constructor(){u(this,"enabled",!1);u(this,"debugScriptLoaded",o(t=>{},"debugScriptLoaded"));u(this,"debugScriptLoadedPromise",new Promise(t=>{this.debugScriptLoaded=t}))}_initialize(){try{this.enabled=window===window.top&&this.core.window.sessionStorage.getItem(he)===je}catch(t){}this.enabled&&(this.core.get(A).delayAdRequests(this.debugScriptLoadedPromise),this._loadDebugScript())}_toggleDebugMode(){return R(this,null,function*(){this.enabled?this.core.window.sessionStorage.removeItem(he):this.core.window.sessionStorage.setItem(he,je),this.core.window.location.reload()})}_onDebugScriptLoaded(){this.debugScriptLoaded(void 0)}_loadDebugScript(){return R(this,null,function*(){let{ctx:t,cmp:e}=this.core.get(w).getTagInfo(),{document:r}=this.core.window,n=Ye(`https://pub.doubleverify.com/dvtag/${t}/${e}/debug.js`,!0);r.readyState==="loading"&&(yield new Promise(d=>r.addEventListener("DOMContentLoaded",()=>d(void 0)))),r.head.appendChild(n)})}_onAdRequestEvent(t){var e;(e=window.dvtagDebug)==null||e.adRequestEvent(t)}};o(z,"DebugScriptLoader"),l([b],z.prototype,"_initialize",1),l([it("toggleDebugMode")],z.prototype,"_toggleDebugMode",1),l([it("_debugScriptLoaded")],z.prototype,"_onDebugScriptLoaded",1),l([f(A,"adRequestQueued"),f(A,"adRequestBeforeRelease"),f(A,"adRequestTimedOut")],z.prototype,"_onAdRequestEvent",1),z=l([N(I),h],z);s();a();var fe="qt_loaded",jt="pts_pid",Ke="pts_sid";s();a();var Se=o(i=>[...new Set(i.filter(Oe).map(t=>t.toLowerCase()))],"getGreenlightSignal");var Z=class extends x{_autoInsertPageId(){this.core.get(v).setGlobalTargeting({[jt]:[this.core.get(w).getVisitUuid()]})}_autoInsertSlotId(t){this.core.get(v).setSlotTargeting(t,{[Ke]:[t.uuid]})}_autoInsertGlobalTargeting(t){this.core.get(v).setGlobalTargeting({[fe]:Se(Object.keys(t))},!0)}_autoInsertSlotTargeting(t,e){this.core.get(v).setSlotTargeting(t,{[fe]:Se(Object.keys(e))},!0)}};o(Z,"SignalsAutoInsertion"),l([f(w,"newVisit")],Z.prototype,"_autoInsertPageId",1),l([f(y,"slotDiscovered")],Z.prototype,"_autoInsertSlotId",1),l([f(_,"userTargetingUpdated"),f(_,"pageTargetingUpdated")],Z.prototype,"_autoInsertGlobalTargeting",1),l([f(_,"slotTargetingUpdated")],Z.prototype,"_autoInsertSlotTargeting",1),Z=l([h,N(G),N(z)],Z);s();a();s();a();s();a();var br="https://vtrk.doubleverify.com",We="dvtag",wr=1,xr=1,U=class{constructor(){u(this,"sharedDataPoints")}_onAdRequestCompleted(t){if(t.index!==0)return;let{timeoutValue:e,onDvtagReadyCalled:r,callbackCalled:n}=t,d=n!=null?n-r:e;this.fireEvent("ad-request",{cd111:t.status,cm106:t.index,cm107:d,cd112:t.internal?"legacy":"modern"},{sampleInterval:xr})}_handleError(t){this.fireEvent("log",{cd111:"error",cd112:t.message,cd113:t.trace.join("=>")},{sampleInterval:wr})}_getSharedDataPoints(){if(this.sharedDataPoints==null){let t=this.core.get(w),e=this.core.get(W),r=this.core.get(P),{ctx:n,cmp:d,legacy:c}=t.getTagInfo(),p=r.getHostname(),S=t.getSessionUuid(),T=e.getShortCommitId();this.sharedDataPoints={cd102:T,cd103:"",cd107:S,cd109:c?"legacy":"modern",cd108:"",cd105:n,cd106:d,cd104:p}}return this.sharedDataPoints}fireEvent(t,e,{sampleInterval:r=1,trackerUuid:n=lt(),spoofWrapperId:d=!1}={}){if(Math.random()>=1/r)return;e=Ct(bt(bt({},e),this._getSharedDataPoints()),{cd101:t,cm101:r});let c=Ct(bt({ec:We,ea:e.cd101,ctx:d?We:e.cd105,cmp:e.cd106},e),{cid:n,t:"event",v:1,z:n,cd160:n}),p=new URL(br);for(let[S,T]of Object.entries(c))T!=null&&p.searchParams.set(S,`${T}`);this._sendBeacon(p.href)}_sendBeacon(t){try{typeof(navigator==null?void 0:navigator.sendBeacon)=="function"?navigator.sendBeacon(t):new Image().src=t}catch(e){}}};o(U,"Events"),l([f(A,"adRequestCompleted")],U.prototype,"_onAdRequestCompleted",1),l([be],U.prototype,"_handleError",1),U=l([h],U);s();a();var Ze=dr(Xe());s();a();var Te=class Te{constructor(t){u(this,"arr");u(this,"start");u(this,"size");this.arr=new Array(t),this.start=0,this.size=0}push(t){this.size===this.arr.length?this.start=this.nthIndex(1):this.size+=1,this.arr[this.nthIndex(this.size-1)]=t}nthIndex(t){return(this.start+t)%this.arr.length}last(){return this.size===0?null:this.arr[this.nthIndex(this.size-1)]}findNewest(t){for(let e=this.size-1;e>=0;e--){let r=this.arr[this.nthIndex(e)];if(t(r))return r}return null}};o(Te,"RingBuffer");var Kt=Te;var Je=10,Dr=100,Ir=3e3,Cr=2e3,B=class{constructor(){u(this,"measurements",new Kt(20));u(this,"lastNavigationTime");u(this,"viewportWidths",new Set);u(this,"documentHeights",new Set)}_initialize(){return R(this,null,function*(){let{document:t}=this.core.window;t.readyState==="loading"&&(yield new Promise(e=>t.addEventListener("DOMContentLoaded",()=>e(void 0)))),t.addEventListener("scroll",(0,Ze.default)(()=>{this._updateScrollMetrics()},200)),this._updateScrollMetrics()})}_getScrollData(){let t=this.core.get(P).isInQuirksMode(),{scrollHeight:e,clientHeight:r,clientWidth:n}=this.core.window.document[t?"body":"documentElement"];return{scrollY:Math.floor(this.core.window.scrollY),viewportHeight:r,viewportWidth:n,documentHeight:e}}_getScrollPercentage({scrollY:t,documentHeight:e,viewportHeight:r}){return e===r?0:t/(e-r)}_updateScrollMetrics(t=!1){var S;let e=this._getScrollData(),r=this.lastNavigationTime!=null&&Date.now()-this.lastNavigationTime<Ir;this.viewportWidths.size<Je&&this.viewportWidths.add(e.viewportWidth),this.documentHeights.size<Je&&this.documentHeights.add(e.documentHeight);let{deepestScrollData:n,deepestScrollWithResetData:d,maxScrollData:c,hasScrolledToTop:p}=(S=this.measurements.last())!=null?S:{};p=!t&&p===!0||e.scrollY<e.viewportHeight,(c==null||r||e.scrollY>=c.scrollY)&&(c=e),(n==null||r||this._getScrollPercentage(e)>=this._getScrollPercentage(n))&&(n=e),(d==null||r||this._getScrollPercentage(e)>=this._getScrollPercentage(d)||e.documentHeight-d.documentHeight>Dr)&&(d=e),this.measurements.push({time:Date.now(),hasScrolledToTop:p,maxScrollData:c,deepestScrollData:n,deepestScrollWithResetData:d})}getScrollMeasurements(t){var r;let e;return t==null?e=this.measurements.last():e=(r=this.measurements.findNewest(n=>n.time<Date.now()-t))!=null?r:this.measurements.last(),e==null?null:Ct(bt({},e),{viewportWidths:this.viewportWidths,documentHeights:this.documentHeights})}reset(){this.lastNavigationTime=Date.now(),this._updateScrollMetrics(!0),setTimeout(()=>this._updateScrollMetrics(),Cr)}};o(B,"ScrollMetrics"),l([b],B.prototype,"_initialize",1),B=l([h],B);s();a();s();a();var tr=o((i,{deepestScrollData:t,deepestScrollWithResetData:e,maxScrollData:r,viewportWidths:n,documentHeights:d},{inFocusMs:c,visibleMs:p,visibleAndInFocusMs:S},T,E)=>{var j;let rt=(j=performance==null?void 0:performance.now)==null?void 0:j.call(performance);return{cd110:i.visit.normalizedUrl,cd111:[...n].join(","),cd112:[...d].join(","),cd113:i.visit.uuid,cm106:c,cm107:p,cm108:T,cm109:E,cm110:i.visitIndex,cm111:i.infiniteScrollDetected?1:0,cm116:rt!=null?rt/1e3:void 0,cm117:S,cm118:i.visitStart/1e3,cm119:Date.now()/1e3,cm120:i.trackerCount,cm121:t.scrollY,cm122:t.viewportHeight,cm123:t.viewportWidth,cm124:t.documentHeight,cm125:e.scrollY,cm126:e.viewportHeight,cm127:e.viewportWidth,cm128:e.documentHeight,cm129:r.scrollY,cm130:r.viewportHeight,cm131:r.viewportWidth,cm132:r.documentHeight}},"createPlemTracker");s();a();s();a();var Re=class Re{constructor(){u(this,"runningSince",null);u(this,"totalTimeMs",0)}getTimestamp(){return Date.now()}getCurrentRunningTime(){return this.runningSince!=null?this.getTimestamp()-this.runningSince:0}start(){this.runningSince=this.getTimestamp()}stop(){this.totalTimeMs+=this.getCurrentRunningTime(),this.runningSince=null}add(t){this.totalTimeMs+=t}get(){return this.totalTimeMs+this.getCurrentRunningTime()}reset(t=!1){this.runningSince=this.runningSince!=null&&t?Date.now():null,this.totalTimeMs=0}};o(Re,"Timer");var xt=Re;var tt=class{constructor(){u(this,"inFocusTimer",new xt);u(this,"visibleTimer",new xt);u(this,"visibleInFocusTimer",new xt)}_initialize(){return R(this,null,function*(){var r,n,d;let t=this.core.window,e=(d=(n=(r=t.performance)==null?void 0:r.now)==null?void 0:n.call(r))!=null?d:0;t.addEventListener("focus",()=>{this.inFocusTimer.start(),t.document.hidden||this.visibleInFocusTimer.start()}),t.addEventListener("blur",()=>{this.inFocusTimer.stop(),this.visibleInFocusTimer.stop()}),t.document.addEventListener("visibilitychange",()=>{t.document.hidden?(this.visibleTimer.stop(),this.visibleInFocusTimer.stop()):(this.visibleTimer.start(),t.document.hasFocus()&&this.visibleInFocusTimer.start())}),t.document.hasFocus()&&(this.inFocusTimer.add(e),this.inFocusTimer.start(),t.document.hidden||(this.visibleInFocusTimer.add(e),this.visibleInFocusTimer.start())),t.document.hidden||(this.visibleTimer.add(e),this.visibleTimer.start())})}getVisibilityMeasurements(){return{inFocusMs:this.inFocusTimer.get(),visibleMs:this.visibleTimer.get(),visibleAndInFocusMs:this.visibleInFocusTimer.get()}}reset(){this.visibleTimer.reset(!0),this.inFocusTimer.reset(!0),this.visibleInFocusTimer.reset(!0)}};o(tt,"VisibilityMetrics"),l([b],tt.prototype,"_initialize",1),tt=l([h],tt);var qr=6e4,Ur=61*60*1e3,Or=59.5*60*1e3,kr=6e4,Mr=2500,Nr=5e3,Lr=1500,pt=class{constructor(){u(this,"currVisit");u(this,"pendingTracker");u(this,"tagLoadTime");u(this,"firstContentfulPaint")}_initialize(){return R(this,null,function*(){var e,r;let t=this.core.window;this.tagLoadTime=(r=(e=this.core.window.performance)==null?void 0:e.now)==null?void 0:r.call(e),this._updateFirstContentfulPaint(),t.document.addEventListener("visibilitychange",()=>{t.document.hidden&&this._flushTrackers()}),setInterval(()=>{this.currVisit!=null&&Date.now()>this.currVisit.visitStart+Or&&(t.document.hidden||this._fireTracker())},kr)})}_updateFirstContentfulPaint(){try{let t=new this.core.window.PerformanceObserver(e=>{e.getEntries().forEach(r=>{r.name==="first-contentful-paint"&&(this.firstContentfulPaint=r.startTime,t.disconnect())})});t.observe({type:"paint",buffered:!0})}catch(t){}}_fireTracker({visit:t,scroll:e,visibility:r}=this._getTrackerData(),n=!1){e!=null&&(!n&&(Date.now()>t.visitStart+Ur||t.lastTrackerTime!=null&&t.lastTrackerTime>Date.now()-qr)||(this.core.get(U).fireEvent("content-metrics",tr(t,e,r,this.tagLoadTime,this.firstContentfulPaint),{sampleInterval:1,spoofWrapperId:!0}),t.lastTrackerTime=Date.now(),t.trackerCount+=1))}_getTrackerData(){if(this.currVisit==null)throw new Error("No data!");return{visit:this.currVisit,scroll:this.core.get(B).getScrollMeasurements(Lr),visibility:this.core.get(tt).getVisibilityMeasurements()}}_checkForInfiniteScroll(){let t=this.core.get(B).getScrollMeasurements();t!=null&&!t.hasScrolledToTop&&(this.pendingTracker!=null&&(this.pendingTracker.data.visit.infiniteScrollDetected=!0),this.currVisit!=null&&(this.currVisit.infiniteScrollDetected=!0))}_scheduleDelayedTracker(){this._flushPendingTracker(),this.pendingTracker={data:this._getTrackerData(),timer:setTimeout(()=>{this._flushPendingTracker()},Nr)}}_flushPendingTracker(){this.pendingTracker!=null&&(this._checkForInfiniteScroll(),this._fireTracker(this.pendingTracker.data,!0),clearTimeout(this.pendingTracker.timer),this.pendingTracker=void 0)}_flushTrackers(){this._flushPendingTracker(),this._fireTracker()}_onNewVisit(t){var r,n;let e=this.currVisit==null;this.currVisit!=null&&(Date.now()-this.currVisit.visitStart>Mr&&this._scheduleDelayedTracker(),this.core.get(tt).reset(),this.core.get(B).reset()),this.currVisit={visit:t,visitStart:Date.now()-(e&&this.tagLoadTime!=null?this.tagLoadTime:0),visitIndex:((n=(r=this.currVisit)==null?void 0:r.visitIndex)!=null?n:-1)+1,trackerCount:0}}};o(pt,"PLEMetrics"),l([b],pt.prototype,"_initialize",1),l([f(w,"newVisit")],pt.prototype,"_onNewVisit",1),pt=l([h],pt);s();a();s();a();var Vr=jt,Y=class{constructor(){u(this,"restoreCount",0)}getRestoreCount(){return this.restoreCount}_restoreTargeting(){let t=this.core.get(v);for(let e of this.core.get(y).getSlots())t.getAdServerTargeting(e,Vr).length===0&&(t.setAdServerTargeting(e),this.restoreCount+=1)}};o(Y,"TargetingRestorer"),l([f(A,"adRequestQueued")],Y.prototype,"_restoreTargeting",1),Y=l([h],Y);s();a();var ye=class ye{constructor(){u(this,"total",0);u(this,"dataPoints",0)}push(t){return this.total+=t,this.dataPoints+=1,this}get(){return this.total/this.dataPoints}getRounded(){return Math.round(this.get())}};o(ye,"Average");var Nt=ye;var Fr="implcheck",Qr=1e-4,Gr=5e3,zr=5,H=class{constructor(){u(this,"enabled",!1);u(this,"totalInternalAdRequestQueuedCount",0);u(this,"totalAdRequestsCompletedCount",0);u(this,"totalSlotsRequestedCount",0);u(this,"totalSlotsRequestedOkCount",0);u(this,"totalTimeoutCount",0);u(this,"trackersSent",0);u(this,"totalValidatedAdServerRequests",{ok:0,notOk:0});u(this,"lastOnDvtagReadyCall",NaN);u(this,"slotReqAvgTimeSinceCall",new Nt);u(this,"slotReqAvgTimeSinceDone",new Nt);u(this,"batch",null)}isDebugForceEnabled(){return!1}_initialize(){this.enabled=this.core.get(H).isDebugForceEnabled()||Math.random()<Qr,this.enabled&&this.core.get(I).enableAdRequestValidation()}_onAdRequestQueued(t){this.enabled&&(this.lastOnDvtagReadyCall=mt(),t.internal&&(this.totalInternalAdRequestQueuedCount+=1))}_onAdRequestCompleted(t){this.enabled&&(this.totalAdRequestsCompletedCount+=1,(t.status==="tag-timeout"||t.status==="queue-timeout")&&(this.totalTimeoutCount+=1))}_onSlotRequested(t,e,r){if(!this.enabled)return;let n=this._getOrStartBatch();this.totalSlotsRequestedCount+=1,e==="READY"&&(this.totalSlotsRequestedOkCount+=1),n.slots[e].push(t.elementId),r!=null&&(this.slotReqAvgTimeSinceDone.push(r),this.slotReqAvgTimeSinceCall.push(mt()-this.lastOnDvtagReadyCall));let d=this._validateAdServerTargeting(t);d===1?n.targeting.extendedCount+=1:d===0&&(n.targeting.reducedCount+=1)}_validateAdServerTargeting(t){let e=this.core.get(v),r=2,n=e.getTargeting(t);for(let[d,c]of Object.entries(n)){let p=e.getAdServerTargeting(t,d);if(c.length>p.length||c.some(S=>!p.includes(S)))return 0;p.length>c.length&&(r=1)}return r}_onSlotRequestValidated(t){t?this.totalValidatedAdServerRequests.ok+=1:this.totalValidatedAdServerRequests.notOk+=1}_sendTracker(){let t=this.core.get(Y).getRestoreCount(),{slots:e,targeting:r,start:n}=this._getOrStartBatch(),d={cd110:e.READY.join(),cd111:e.PREV_READY.join(),cd112:e.SEEN.join(),cd113:e.NOT_READY.join(),cd114:e.UNKNOWN.join(),cd115:e.POSSIBLE_TIMEOUT.join(),cm106:this.trackersSent,cm107:n,cm109:this.totalTimeoutCount,cm110:this.slotReqAvgTimeSinceCall.getRounded(),cm111:this.slotReqAvgTimeSinceDone.getRounded(),cm112:this.totalSlotsRequestedOkCount,cm113:this.totalValidatedAdServerRequests.ok,cm114:this.totalValidatedAdServerRequests.notOk,cm115:t,cm116:this.totalAdRequestsCompletedCount,cm117:this.totalInternalAdRequestQueuedCount,cm118:this.totalSlotsRequestedCount,cm119:r.reducedCount,cm120:r.extendedCount};this.core.get(U).fireEvent(Fr,d),this.batch=null,this.trackersSent+=1,this.trackersSent>=zr&&(this.enabled=!1)}_getOrStartBatch(){return this.batch==null&&(this.batch={start:mt(),slots:Object.fromEntries(Object.values(Yt).map(t=>[t,[]])),targeting:{extendedCount:0,reducedCount:0}},setTimeout(()=>this._sendTracker(),Gr)),this.batch}};o(H,"ImplementationValidator"),l([b],H.prototype,"_initialize",1),l([f(A,"adRequestQueued")],H.prototype,"_onAdRequestQueued",1),l([f(A,"adRequestCompleted")],H.prototype,"_onAdRequestCompleted",1),l([f(I,"onSlotRequested")],H.prototype,"_onSlotRequested",1),l([f(I,"onSlotRequestValidated")],H.prototype,"_onSlotRequestValidated",1),H=l([h],H);s();a();s();a();var et=class{_defineSlot(t,e={}){if(typeof t!="string"||e==null||typeof e!="object")return;let r={id:k(e.id),network:k(e.network),sizes:e.sizes!=null?wt(e.sizes):void 0,position:k(e.position)};this.core.get(y).createSlot("custom",0,t,r)}_adRendered(t,e){if(typeof t!="string"||e==null||typeof e!="object")return;let r=this.core.get(y).getSlot("custom",t);if(r==null)return;let n={type:"display",advertiserId:k(e.advertiserId),campaignId:k(e.campaignId),creativeId:k(e.creativeId),lineItemId:k(e.lineItemId),renderedSize:Ht(e.renderedSize)};this.core.get(q).setAdRendered(r,n)}_getTargeting(t){let e=this.core.get(v);if(typeof t!="string")return e.getTargeting();let r=this.core.get(y).getSlot("custom",t);return e.getTargeting(r)}};o(et,"CustomAdServer"),l([it("defineSlot")],et.prototype,"_defineSlot",1),l([it("getTargeting")],et.prototype,"_getTargeting",1),et=l([h],et);s();a();var st=class{constructor(){u(this,"initialized",!1);u(this,"size",0)}_initialize(){return R(this,null,function*(){if(yield Promise.resolve(),this.initialized)return;this.initialized=!0,this.core.dvtag.cmd instanceof Array||(this.core.dvtag.cmd=[]);let t=this.core.dvtag.cmd;this.core.dvtag.cmd={push:o((...e)=>{for(let r of e)try{r()}catch(n){}return this.size+=e.length,this.size},"push")},this.core.dvtag.cmd.push(...t)})}};o(st,"CommandBuffer"),l([b],st.prototype,"_initialize",1),st=l([h],st);var Pt=class{};o(Pt,"HouseHold"),Pt=l([h,N(A),N(st),N(U),N(et),N(Y)],Pt);s();a();if(window.dvtag==null||window.dvtag._core==null)try{new qt(ee,window)}catch(i){}})();
